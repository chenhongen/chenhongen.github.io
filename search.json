[{"title":"","url":"http://rebey.cn/2017/04/29/WebVR端午龙头记/","content":"<ul>\n<li><p>效果展示：</p>\n<p> ☞ <a href=\"http://rebey.oschina.io/aframe/\" target=\"_blank\" rel=\"external\">点我打开新世界</a></p>\n</li>\n</ul>\n<ul>\n<li><p>相关技术：</p>\n<p> ☞ <em>aframe.js</em>： Mozilla 开源的网页虚拟现实体验( WebVR )框架；</p>\n<p> ☞ <em>MagicaVoxel</em>： @ephtracy开发的体素编辑神器；</p>\n</li>\n</ul>\n<ul>\n<li>代码实现：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div></pre></td><td class=\"code\"><pre><div class=\"line\">html:</div><div class=\"line\">&lt;script src=&quot;js/aframe.js&quot;&gt;&lt;/script&gt;</div><div class=\"line\">&lt;script src=&quot;js/aframe-extras.loaders.min.js&quot;&gt;&lt;/script&gt;</div><div class=\"line\">  </div><div class=\"line\">&lt;a-scene&gt;</div><div class=\"line\">  &lt;a-assets&gt;</div><div class=\"line\">    &lt;a-asset-item id=&quot;myModelObj&quot; src=&quot;che.obj&quot;&gt;&lt;/a-asset-item&gt;</div><div class=\"line\">    &lt;a-asset-item id=&quot;myModelMtl&quot; src=&quot;che.mtl&quot;&gt;&lt;/a-asset-item&gt;</div><div class=\"line\">    &lt;!-- &lt;a-asset-item id=&quot;myPlyModel&quot; src=&quot;che.ply&quot;&gt;&lt;/a-asset-item&gt; --&gt;</div><div class=\"line\">    &lt;img id=&quot;skyTexture&quot; src=&quot;image/sechelt.jpg&quot;&gt;</div><div class=\"line\">  &lt;/a-assets&gt;</div><div class=\"line\">  </div><div class=\"line\">  &lt;a-entity position=&quot;0 1.2 -5&quot; scale=&quot;0.035 0.035 0.035&quot; rotation=&quot;-10 -150 -15&quot; obj-model=&quot;obj: #myModelObj; mtl: #myModelMtl&quot;&gt;</div><div class=\"line\">    &lt;a-animation attribute=&quot;position&quot; to=&quot;0 1.4 -5&quot; direction=&quot;alternate&quot; dur=&quot;2000&quot; repeat=&quot;indefinite&quot;&gt;&lt;/a-animation&gt;</div><div class=\"line\">    &lt;a-animation attribute=&quot;rotation&quot; begin=&quot;click&quot; dur=&quot;7200&quot; to=&quot;-10 570 -15&quot; &gt;&lt;/a-animation&gt;</div><div class=\"line\">  \t</div><div class=\"line\">  &lt;/a-entity&gt;</div><div class=\"line\">  &lt;!-- &lt;a-entity ply-model=&quot;src: #myPlyModel&quot; position=&quot;0 1 -1&quot; scale=&quot;0.01 0.01 0.01&quot; rotation=&quot;-90 0 0&quot;&gt;&lt;/a-entity&gt; --&gt;</div><div class=\"line\"></div><div class=\"line\">  &lt;a-sky src=&quot;#skyTexture&quot; &gt;&lt;/a-sky&gt;</div><div class=\"line\">  </div><div class=\"line\">  &lt;a-text value=&quot;rebey.cn 端午节快乐！&quot; color=&quot;#CCC&quot; </div><div class=\"line\">    position=&quot;-0.9 0.2 -3&quot; scale=&quot;2 2 2&quot;&gt;&lt;/a-text&gt;</div><div class=\"line\">  </div><div class=\"line\">  &lt;a-camera&gt;</div><div class=\"line\">    &lt;a-cursor&gt;&lt;/a-cursor&gt;</div><div class=\"line\">  &lt;/a-camera&gt;</div><div class=\"line\">&lt;/a-scene&gt;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>代码分析：</p>\n<p> 由aframe全权负责搭建3d全景，由 <em>entity-龙头、sky-天空环境、text-文字、camera-模拟镜头焦点、assert-存放定义对象（通过id引用）</em>构成。更多aframe知识点参考官网<a href=\"https://aframe.io/docs/0.5.0/guides/building-with-magicavoxel.html\" target=\"_blank\" rel=\"external\">aframe.io</a>。最花时间的就是使用MagicaVoxel画的龙头，画了我两天近十几个小时。最终和大家分享成果，庆祝一年一度的端午节。</p>\n</li>\n<li><p>写在最后：</p>\n<p> 最重要的往往在最后。细心的你发现了吗？在源码中a-text的值明明写了中文却没有显示。是的，aframe用的字体不支持伟大的汉字，前端大神可以尝试一下更改aframe引用的字体。</p>\n<p> 还有一点重要的是，引用aframe.js后必须运行在服务器端，否则可能出现浏览器提示跨域冲突的问题，可以将代码置于nodejs或者tomcat等服务器下运行。</p>\n<p> 此外，aframe支持MagicaVoxel导出的两种方式.PLY (with Baked Shadows)与.OBJ。当你选择的是OBJ时请注意，导出的是3个文件（.obj/.png/.mtl）缺一不可。</p>\n</li>\n</ul>\n<ul>\n<li><p>关于作者：</p>\n<p> <a href=\"http://rebey.cn\">rebey.cn</a>：个人博客-沉迷前端美色的java工程师，有工作机会欢迎联系。</p>\n</li>\n</ul>\n"},{"title":"SSM架构问题记录之配置篇","url":"http://rebey.cn/2017/02/19/SSM架构问题记录之配置篇/","content":"<ul>\n<li><p><strong>概要</strong></p>\n<p>  习惯了使用别人的框架，自己动手时碰到的一些问题。</p>\n<p>  工具：maven+spring+mybatis+oracle等。</p>\n</li>\n<li><p><strong>问题01</strong></p>\n<p>  使用MyBatis Generator自动生成工具生成代码，使用junit测试insert一条记录。（由于<a href=\"http://www.cnblogs.com/panie2015/p/5807683.html\" target=\"_blank\" rel=\"external\">oracle主键自增需要依赖序列</a>，这里采用手动赋值测试。）</p>\n<p>  <strong>报错</strong>：==<em>…无效的列类型: getBigDecimal not implemented for class oracle.jdbc.driver.T4CRowidAcces…</em>==；</p>\n</li>\n<li><p><strong>解决01</strong></p>\n<p>  最主要的原因，是我在mybatis-config.xml中配置了“<setting name=\"useGeneratedKeys\" value=\"true\">”而oracle并不支持所以报错；<br>  此外值得一提的是，Generator在生成PO对象时会更加++NUMBER类型的长度++对应java数据类型。如下：</setting></p>\n<p>  长度 | 类型<br>  —|—<br>  1~4 | Short<br>  5~9 | Integer<br>  10~18 | Long<br>  18+（或不写） | BigDecimal</p>\n</li>\n<li><p><strong>挥别亲朋，漂泊异乡在这几平米的空间里就是写梦想，没有时间浪了。待续…</strong></p>\n</li>\n</ul>\n"},{"title":"js：对象-属性-set/get","url":"http://rebey.cn/2016/12/31/js中的set与get/","content":"<p><strong>碎语</strong>：</p>\n<p>&emsp;&emsp;js有<em>对象-属性</em>这早已耳熟能详，直到偶然看到某开源js源码才发现，同java一样，它也有对应的<em>set/get方法</em>。</p>\n<p><strong>demo</strong>：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> che = &#123;</div><div class=\"line\">\t_wheels: <span class=\"number\">4</span>,</div><div class=\"line\">\tget wheels() &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._wheels;</div><div class=\"line\">\t&#125;,</div><div class=\"line\">\tset wheels(value) &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(value &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'give me a wheel at least,please!'</span>);</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">this</span>._wheels = value;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che.wheels: \"</span>+che.wheels);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che._wheels: \"</span>+che._wheels);</div><div class=\"line\"></div><div class=\"line\">che.wheels = <span class=\"number\">2</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che.wheels: \"</span>+che.wheels);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che._wheels: \"</span>+che._wheels);</div><div class=\"line\"></div><div class=\"line\">che.wheels = <span class=\"number\">0</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che.wheels: \"</span>+che.wheels);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che._wheels: \"</span>+che._wheels);</div></pre></td></tr></table></figure></p>\n<p><strong>兼容</strong>：这种写法并==不支持IE8==，替代方法如下;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> che2 = &#123;</div><div class=\"line\">\t_wheels: <span class=\"number\">4</span></div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(che2, <span class=\"string\">\"wheels\"</span>, &#123;</div><div class=\"line\">\tget: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._wheels;</div><div class=\"line\">\t&#125;,</div><div class=\"line\">\tset: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(value &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'give me a wheel at least,please!'</span>);</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">this</span>._wheels = value;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><strong>补充</strong>：</p>\n<p>传说中的标准写法（不代表常用）<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Field</span>(<span class=\"params\">val</span>)</span>&#123;  </div><div class=\"line\">    <span class=\"keyword\">this</span>.value = val;  </div><div class=\"line\">&#125; </div><div class=\"line\"></div><div class=\"line\">Field.prototype = &#123;  </div><div class=\"line\">    get value()&#123;  </div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._value;  </div><div class=\"line\">    &#125;,  </div><div class=\"line\">    set value(val)&#123;  </div><div class=\"line\">        <span class=\"keyword\">this</span>._value = val;  </div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> field = <span class=\"keyword\">new</span> Field(<span class=\"string\">\"che\"</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(field.value);</div><div class=\"line\"></div><div class=\"line\">field.value = <span class=\"string\">\"che2\"</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(field.value);</div></pre></td></tr></table></figure></p>\n<p>常用写法（外界无法修改默认值）<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> che3 = &#123;</div><div class=\"line\">\tget wheels() &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">4</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che3.wheels: \"</span> + che3.wheels);</div><div class=\"line\"></div><div class=\"line\">che3.wheels = <span class=\"number\">2</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"che3.wheels: \"</span> + che3.wheels);</div></pre></td></tr></table></figure></p>\n<p><del>最后祝各位程序员，新年吉祥。早！日！脱！单</del>！</p>\n<p><strong>参考</strong>：<a href=\"http://www.cnblogs.com/lhb25/archive/2010/09/19/1830724.html\" target=\"_blank\" rel=\"external\">网络之美：JavaScript中Get和Set访问器的实现 </a></p>\n"},{"title":"CheBus2Mail 实时公交信息（邮件版）踩坑记","url":"http://rebey.cn/2016/10/23/CheBus2Mail 实时公交信息（邮件版）踩坑记/","content":"<ul>\n<li><p><strong>前景</strong></p>\n<p>  在寒冬，于北京。错过一辆晚高峰的公交就好比全世界从你身边路过。</p>\n<p>  需求是第一生产力，公交集团推出了查询实时公交的微信公众号，无奈不准确且不稳定，用户体验差。随后某度地图与其合作将此功能结合到了自己的产品中，公交实时定位基本准确。查询总共分三步：<del>①把冰箱门打开</del> <em>①输入公交车次号;②选择公交开往方向；③选择乘坐站点</em>。查询结果会告诉你，离你最近的三辆公交距离你还有几站。</p>\n<p>  那么问题来了，我每天就是要从公司坐同一趟车回家，车次、方向、站点、时间基本固定。根据查询结果的距离站点数，决定我出门候车时间。可以极大降低因候车时间，从而减少雾霾吸收量。然而，不愉快的事我每天需要抽出时间打开它那沉重的APP，输入相同的数字，点击重复的操作才能得到我想要的数据。这么一来，需求很明确了，我们需要一个定时推送实时公交信息的功能的喔~</p>\n</li>\n<li><p><strong>思路</strong></p>\n</li>\n</ul>\n<ol>\n<li>爬虫：nodejs也好、python也好、java也好。能爬到数据的就是好爬虫；</li>\n<li>解析：抓取后数据处理，提取关键信息；</li>\n<li>推送：微信也好、QQ也好、邮件也好。不需要认证审核、消息数量无限制、开发代价小，那么首选就是邮件了。</li>\n</ol>\n<ul>\n<li><p><strong>难点</strong></p>\n<p>门神：起初由于最近刚自学了nodejs，看到它可以写爬虫，就尝试用它来抓取网页数据。然而公交集团的php网站做了类似cookie校验的措施。ajax请求无情的抛回来“timeout”。也尝试过模仿请求头来请求，也吃了闭门羹。这种防爬虫的措施，让我不得不放弃几行代码就能实现爬虫的nodejs，而改用主要用于自动化测试的java ==selenium==。</p>\n<p>版本：selenium需要浏览器驱动（如：chromedriver.exe）的辅助。新版本的浏览器可能出现不支持的情况！如果你在本机运行selenium启动浏览器没问题，在服务器运行报错。jar包引入等都没问题情况下，查询浏览器版本吧。</p>\n<p>定时：==ScheduledExecutorService==实现定时效果。</p>\n<p>运行：在本机，将java project打成runnable jar。win7下直接双击可直接执行，而放到window server 2008服务器上却执行不了，甚是郁闷。研究jre/jvm配置后无果，变通采用==exe4j==工具，将jar打成exe可执行文件。顺带支持自定义logo。</p>\n<p><img src=\"https://github.com/chenhongen/imgStorage/raw/master/20161023-cbm.png\" alt=\"image\"></p>\n</li>\n<li><p><strong>效果</strong></p>\n<p>每天下班时间邮箱收到抓取后的公交信息邮件。</p>\n<p><img src=\"https://github.com/chenhongen/imgStorage/raw/master/20161023-result.jpg\" alt=\"image\"></p>\n</li>\n<li><p><strong>源码</strong></p>\n<p>保护水表，暂不开源。</p>\n</li>\n</ul>\n"},{"title":"js仿Excel公式应用-ruleJS","url":"http://rebey.cn/2016/09/25/js仿Excel公式应用-ruleJS/","content":"<ul>\n<li><p><strong>概要</strong></p>\n<p>  这是一个基于ruleJS的应用小Demo，体现<em>网页表格等输入公式（类似Excel）并自动计算结果</em>的效果；适用IE9及以上主流浏览器；demo根据<a href=\"https://github.com/chenhongen/ruleJS\" target=\"_blank\" rel=\"external\">handsontable github</a>上源码改编。</p>\n</li>\n<li><p><strong>难点</strong></p>\n<p>  ruleJS取值定位类似Excel，默认使用了横轴英文字母(A、B、C…),纵轴数字（1,、2、3…）来定位值；如，id值为“C1”即表示第3列第1行元素;此时当网页同时存在多个表格时，需要考虑id重复的隐患，本例使用了iframe来回避这个问题；</p>\n<p>  尝试兼容IE8做了些修改，替换了源码中使用的一些IE8不支持的函数，诸如：querySelectorAll、Array.indexOf、Array.filter、Array.forEach、getElementsByClassName等；最后还是因为ie8没有HTMLElement兼容失败，暂时抛弃小八（T T）；</p>\n<p>  handsontable贴出的介绍函数链接已失效，可参考Excel相关函数定义规范来使用（或者看js源码–）；</p>\n</li>\n<li><p><strong>链接</strong><br>  演示地址：<a href=\"https://chenhongen.github.io/ruleJS4Excel\" target=\"_blank\" rel=\"external\">点我</a>；<br>  demo源码：<a href=\"https://github.com/chenhongen/ruleJS4Excel\" target=\"_blank\" rel=\"external\">github传送门</a>；</p>\n</li>\n<li><p><strong>源码分析</strong></p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ ruleJS.all.full.js片段：</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * form elements, which can be parsed</div><div class=\"line\">     * @type &#123;string[]&#125;</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"comment\">//var formElements = ['input[type=text]', '[data-formula]'];</span></div><div class=\"line\">    <span class=\"comment\">//定义需要转换为公式的选择器</span></div><div class=\"line\">    <span class=\"keyword\">var</span> formElements = [<span class=\"string\">'input[class=rj-formula]'</span>, <span class=\"string\">'[data-formula]'</span>];</div></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ jsp片段：</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"A3\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"7\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"rj-formula\"</span>&gt;</span></div><div class=\"line\">    ...</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"K1\"</span> <span class=\"attr\">data-formula</span>=<span class=\"string\">\"SUM(A1:C3,A1)\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"rj-formula\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></div></pre></td></tr></table></figure>"},{"title":"querySelector/querySelectorAll","url":"http://rebey.cn/2016/09/21/querySelector与querySelectorAll/","content":"<p><strong>格式</strong>：</p>\n<p><em>[1].querySelector([2]);</em></p>\n<p><em>[1].querySelectorAll([2]);</em></p>\n<p>[1]Document/Element;</p>\n<p>[2]CSS 选择器: id, 类, 类型, 属性, 属性值等;多个时querySelectorAll(“①,②，…”)或querySelectorAll([“①”,”②”，…]);</p>\n<p><strong>说明</strong>：主要作用为CSS选择器；querySelector返回第一个匹配元素,匹配不到返回null；querySelectorAll返回所有匹配元素集合，匹配不到返回NodeList[]；</p>\n<p>这里着重说明querySelectorAll，其返回值为NodeList。<br>NodeList是静态的，主要有length与item两个属性；常把NodeList转为数组使用：Array.prototype.slice.call(div_list);</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"> <span class=\"comment\">// 体现静态</span></div><div class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"body\"</span>).querySelectorAll(<span class=\"string\">\"div\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> b = <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">\"div\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> oDiv = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"div\"</span>);</div><div class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(oDiv);</div><div class=\"line\">alert(<span class=\"string\">\"querySelectorAll:\"</span>+a.length+<span class=\"string\">\"getElementsByTagName:\"</span>+b.length);</div><div class=\"line\"><span class=\"comment\">// 结果：querySelectorAll:3 getElementsByTagName:4</span></div></pre></td></tr></table></figure>\n<p>在IE8下返回类型为StaticNodeList，StaticNodeList只有length属性，使用时小心。</p>\n<p><strong>兼容</strong>：主流浏览器基本支持，特别注意的是，<a href=\"http://caniuse.com/#search=querySelector\" target=\"_blank\" rel=\"external\">IE8只支持CSS2.1和一小部分CSS3</a></p>\n<p><strong>引发</strong>：<br>在handsontable上看到用ruleJS实现了类似Excel的单元格公式计算。download了源码想研究下，结果发现IE8不好使，一查源头就到了querySelectorAll上。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// ruleJS src</span></div><div class=\"line\"><span class=\"keyword\">var</span> formElements = [<span class=\"string\">'input[type=text]'</span>, <span class=\"string\">'[data-formula]'</span>];</div><div class=\"line\">[].slice.call($totalElements).forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$item</span>) </span>&#123;</div><div class=\"line\">    registerElementInMatrix($item);</div><div class=\"line\">    registerElementEvents($item);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p><strong>参考</strong>：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector\" target=\"_blank\" rel=\"external\">MDN Web API</a></p>\n"},{"title":"H5+CSS3 罗小黑动画","url":"http://rebey.cn/2016/09/03/H5+CSS3 罗小黑动画/","content":"<ul>\n<li><p><strong>概要</strong></p>\n<p>  css3-animation-steps()函数 + Sprite（雪碧图）让萌萌的小黑动起来；<br>  html5-canvas 画一个逗喵神器。</p>\n</li>\n<li><p><strong>难点</strong></p>\n<p>  实现纯canvas绘制以指定坐标为原点旋转指定角度的椭圆；<br>  椭圆与曲线活动轨迹磨合调整，多canvas整合；</p>\n</li>\n<li><p><strong>链接</strong><br>  关于本人使用steps()灵感来源于<a href=\"https://jdc.jd.com/archives/1801\" target=\"_blank\" rel=\"external\">京东618</a>的这篇技术贴，里面大致阐述了steps原理，网上还有更透彻的讲解，感兴趣的童鞋可以查阅;<br>  演示地址：<a href=\"https://chenhongen.github.io/h5css3-LUOXIAOHEI/\" target=\"_blank\" rel=\"external\">点我</a>；<br>  demo源码：<a href=\"https://github.com/chenhongen/h5css3-LUOXIAOHEI\" target=\"_blank\" rel=\"external\">github传送门</a>；</p>\n</li>\n<li><p><strong>主要源码</strong></p>\n</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ <span class=\"selector-tag\">css</span>片段：</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.xiaohei</span> &#123;</div><div class=\"line\">\t<span class=\"attribute\">width</span>: <span class=\"number\">350px</span>;</div><div class=\"line\">\t<span class=\"attribute\">height</span>: <span class=\"number\">200px</span>;</div><div class=\"line\">\t<span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(xx.png) no-repeat <span class=\"number\">0</span> <span class=\"number\">0</span>;</div><div class=\"line\">\t<span class=\"attribute\">animation</span>: toleft <span class=\"number\">2s</span> infinite <span class=\"built_in\">steps</span>(11, end);</div><div class=\"line\">\t<span class=\"attribute\">-moz-animation</span>: toleft <span class=\"number\">1.5s</span> infinite <span class=\"built_in\">steps</span>(11);</div><div class=\"line\">\t<span class=\"attribute\">-webkit-animation</span>: toleft <span class=\"number\">2s</span> infinite <span class=\"built_in\">steps</span>(11);</div><div class=\"line\">\t<span class=\"attribute\">z-index</span>: -<span class=\"number\">1</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">@<span class=\"keyword\">keyframes</span> toleft &#123;</div><div class=\"line\">\t<span class=\"comment\">/*0% &#123;background-position:0;&#125;*/</span></div><div class=\"line\">\t100%&#123; <span class=\"attribute\">background-position</span>: -<span class=\"number\">4180px</span> <span class=\"number\">0px</span>;&#125;</div><div class=\"line\">&#125;</div><div class=\"line\">@-<span class=\"keyword\">webkit</span>-<span class=\"keyword\">keyframes</span> toleft &#123;</div><div class=\"line\">\t100%&#123; <span class=\"attribute\">background-position</span>: -<span class=\"number\">4180px</span> <span class=\"number\">0px</span>;&#125;</div><div class=\"line\">&#125;</div><div class=\"line\">@-<span class=\"keyword\">moz</span>-<span class=\"keyword\">keyframes</span> toleft &#123;</div><div class=\"line\">\t100% &#123;<span class=\"attribute\">background-position</span>: -<span class=\"number\">4180px</span> <span class=\"number\">0</span>;&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ js片段：</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> h = <span class=\"number\">30</span>, <span class=\"comment\">// 高度（y轴坐标）</span></div><div class=\"line\">\tarr = [<span class=\"number\">5</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">10</span>,<span class=\"number\">20</span>,<span class=\"number\">30</span>,<span class=\"number\">50</span>,<span class=\"number\">1</span>,<span class=\"number\">-50</span>,<span class=\"number\">-30</span>,<span class=\"number\">-20</span>,<span class=\"number\">-10</span>,<span class=\"number\">-8</span>,<span class=\"number\">-6</span>,<span class=\"number\">-5</span>,<span class=\"number\">-3</span>], <span class=\"comment\">// 草头旋转角度数组</span></div><div class=\"line\">\t<span class=\"comment\">//arrDown = [-6,-7,-8,-9,-10,-20,-30,-50,1,50,30,20,10,8,6,5,4], // 草头下至上旋转角度数组</span></div><div class=\"line\">\ti = <span class=\"number\">0</span>, <span class=\"comment\">// 数组下标</span></div><div class=\"line\">\tflag = <span class=\"literal\">true</span>, <span class=\"comment\">// 切换标识</span></div><div class=\"line\">\ttimer = <span class=\"literal\">null</span>; <span class=\"comment\">// 定时器</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 绘制椭圆（草头）</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">drawOval</span>(<span class=\"params\">ctx, h, neg</span>) </span>&#123;</div><div class=\"line\">\tctx.clearRect(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">200</span>,<span class=\"number\">200</span>);<span class=\"comment\">//清除画布上的指定区域</span></div><div class=\"line\">\tctx.beginPath();</div><div class=\"line\">\t</div><div class=\"line\">\tctx.save();</div><div class=\"line\">\tctx.translate(<span class=\"number\">16</span>,(h-i/<span class=\"number\">8</span>)+<span class=\"number\">8</span>); <span class=\"comment\">// 垂直变化</span></div><div class=\"line\">\tctx.rotate(<span class=\"built_in\">Math</span>.PI/arr[i]*neg); <span class=\"comment\">// 旋转角度</span></div><div class=\"line\">\tctx.scale(<span class=\"number\">1</span>,<span class=\"number\">1</span>/<span class=\"number\">2</span>); <span class=\"comment\">// 绘制椭圆</span></div><div class=\"line\">\tctx.arc(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">15</span>,<span class=\"number\">0</span>,<span class=\"built_in\">Math</span>.PI*<span class=\"number\">2</span>);</div><div class=\"line\">\tctx.fill(); <span class=\"comment\">// 填充</span></div><div class=\"line\">\tctx.stroke();</div><div class=\"line\">\tctx.restore();</div><div class=\"line\"></div><div class=\"line\">\ti++; <span class=\"comment\">// 数组遍历</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 贝塞尔曲线（草杆）绘制</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">drawLine</span>(<span class=\"params\">h</span>) </span>&#123;</div><div class=\"line\">\tcontext.clearRect(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">200</span>,<span class=\"number\">200</span>);<span class=\"comment\">//清除画布上的指定区域</span></div><div class=\"line\">\tcontext.beginPath();</div><div class=\"line\">\tcontext.moveTo(<span class=\"number\">20</span>,h+<span class=\"number\">5</span>); <span class=\"comment\">// 起点</span></div><div class=\"line\">\tcontext.bezierCurveTo(<span class=\"number\">80</span>,<span class=\"number\">100</span>,<span class=\"number\">120</span>,<span class=\"number\">100</span>,<span class=\"number\">200</span>,<span class=\"number\">100</span>); <span class=\"comment\">// </span></div><div class=\"line\">\tcontext.stroke();</div><div class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 绘制函数</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">load</span>(<span class=\"params\">v</span>) </span>&#123;</div><div class=\"line\">\tclearInterval(timer);</div><div class=\"line\">\ttimer = setInterval(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(h===<span class=\"number\">150</span>) &#123;flag = <span class=\"literal\">false</span>; i = <span class=\"number\">0</span>;&#125; <span class=\"comment\">// 切换条件</span></div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(h===<span class=\"number\">30</span>) &#123;flag = <span class=\"literal\">true</span>; i = <span class=\"number\">0</span>;&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(flag) &#123;</div><div class=\"line\">\t\t\th = ++h;</div><div class=\"line\">\t\t\t(h%<span class=\"number\">8</span> == <span class=\"number\">0</span>) &amp;&amp; drawOval(context1, h, <span class=\"number\">1</span>);</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\t\th = --h;</div><div class=\"line\">\t\t\t(h%<span class=\"number\">8</span> == <span class=\"number\">0</span>) &amp;&amp; drawOval(context1, h, <span class=\"number\">-1</span>);</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\tdrawLine(h);</div><div class=\"line\"></div><div class=\"line\">\t\tcontext.drawImage(canvas1,<span class=\"number\">0</span>,<span class=\"number\">0</span>); <span class=\"comment\">// 合并多画布</span></div><div class=\"line\">\t&#125;, v);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"title":"Json的转换与传递","url":"http://rebey.cn/2016/04/16/Json的转换与传递/","content":"<ul>\n<li><p><strong>概要</strong></p>\n<p>  项目中常用的json形式数据在前后台实现string与object对象等各种互转相关知识点整理。</p>\n</li>\n<li><p><strong>前端：Form Data–&gt;Json Object–&gt;Json String:</strong></p>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ jsp片段：</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"jsonForm\"</span>&gt;</span></div><div class=\"line\">    cd：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"goodsCd\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"20150904\"</span> /&gt;</span><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">    name：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"goodsName\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"che\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ js片段：</div><div class=\"line\"><span class=\"comment\">//具有name、value属性，序列化成一个Object对象</span></div><div class=\"line\">$.fn.serializeObject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">var</span> obj = &#123;&#125;;</div><div class=\"line\">   <span class=\"keyword\">var</span> arr = <span class=\"keyword\">this</span>.serializeArray();</div><div class=\"line\">   $.each(arr, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">       <span class=\"keyword\">if</span> (obj[<span class=\"keyword\">this</span>.name]) &#123;</div><div class=\"line\">           <span class=\"keyword\">if</span> (!obj[<span class=\"keyword\">this</span>.name].push) &#123;</div><div class=\"line\">               obj[<span class=\"keyword\">this</span>.name] = [ obj[<span class=\"keyword\">this</span>.name] ];</div><div class=\"line\">           &#125;</div><div class=\"line\">           obj[<span class=\"keyword\">this</span>.name].push(<span class=\"keyword\">this</span>.value || <span class=\"string\">''</span>);</div><div class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">           obj[<span class=\"keyword\">this</span>.name] = <span class=\"keyword\">this</span>.value || <span class=\"string\">''</span>;</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;);</div><div class=\"line\">   <span class=\"keyword\">return</span> obj;</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> jsonForm = $(<span class=\"string\">\"#jsonForm\"</span>);</div><div class=\"line\"><span class=\"comment\">// json对象转json字符串</span></div><div class=\"line\"><span class=\"keyword\">var</span> jsonStr = <span class=\"built_in\">JSON</span>.stringify(jsonForm.serializeObject());</div><div class=\"line\">alert(jsonStr);</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>前端：Json String–&gt;Json Object：</strong></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ js片段：</div><div class=\"line\">jQuery.parseJSON(jsonStr));</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>前后端：Json Object–&gt;JavaBean：</strong></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ js片段：</div><div class=\"line\"><span class=\"comment\">// rb须与后台实体变量名称同名</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRbJson</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> rbJson = &#123;&#125;;</div><div class=\"line\">    </div><div class=\"line\">    rbJson[<span class=\"string\">\"rb.goodsType\"</span>] = <span class=\"string\">\"a\"</span>;</div><div class=\"line\">    rbJson[<span class=\"string\">\"rb.goodsCd\"</span>] = <span class=\"string\">\"b\"</span>;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">return</span> rbJson;</div><div class=\"line\">&#125;</div><div class=\"line\">$(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    $.ajax(&#123;</div><div class=\"line\">        url: <span class=\"string\">\"setJsonObject.action\"</span>,</div><div class=\"line\">\ttype: <span class=\"string\">'POST'</span>,</div><div class=\"line\">\tcache: <span class=\"literal\">false</span>,</div><div class=\"line\">\t<span class=\"keyword\">async</span>:<span class=\"literal\">false</span>,</div><div class=\"line\">\tdata: getRbJson(),</div><div class=\"line\">            success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">text</span>) </span>&#123;</div><div class=\"line\">\t&#125;,</div><div class=\"line\">\terror: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">jqXHR, textStatus, errorThrown</span>) </span>&#123;</div><div class=\"line\">\t    alert(jqXHR.responseText);</div><div class=\"line\">\t&#125;</div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ java片段：</div><div class=\"line\"><span class=\"keyword\">private</span> RbGoods rb;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> RbGoods <span class=\"title\">getRb</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> rb;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRb</span><span class=\"params\">(RbGoods rb)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.rb = rb;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">setJsonObject</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    System.out.println(rb.getGoodsCd());</div><div class=\"line\">    <span class=\"keyword\">return</span> SUCCESS;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>前后端：Json String–&gt;JavaBean：</strong></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ js片段：</div><div class=\"line\"><span class=\"keyword\">var</span> rbStr = &#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> rbArray = [];</div><div class=\"line\">rbArray.push(&#123;goodsCd:<span class=\"string\">'1'</span>,goodsName:<span class=\"string\">'che'</span>&#125;);</div><div class=\"line\">rbArray.push(&#123;goodsCd:<span class=\"string\">'2'</span>,goodsName:<span class=\"string\">'chen'</span>&#125;);</div><div class=\"line\">rbStr[<span class=\"string\">\"jsonArrayStr\"</span>] = rbArray;</div><div class=\"line\">$.ajax(&#123;</div><div class=\"line\">       url: <span class=\"string\">\"jsonStrToObject.action\"</span>,</div><div class=\"line\">      type: <span class=\"string\">'POST'</span>,</div><div class=\"line\">     cache: <span class=\"literal\">false</span>,</div><div class=\"line\">       <span class=\"keyword\">async</span>:<span class=\"literal\">false</span>,</div><div class=\"line\">       data: &#123;jsonStr:<span class=\"built_in\">JSON</span>.stringify(rbArray)&#125;,</div><div class=\"line\">    success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">text</span>) </span>&#123;&#125;,</div><div class=\"line\">   error: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">jqXHR, textStatus, errorThrown</span>) </span>&#123;</div><div class=\"line\">           alert(jqXHR.responseText);</div><div class=\"line\">       &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\">☞ java片段：</div><div class=\"line\"><span class=\"keyword\">private</span> String jsonStr;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getJsonStr</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> jsonStr;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setJsonStr</span><span class=\"params\">(String jsonStr)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.jsonStr = jsonStr;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">jsonStrToObject</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// String转JSON</span></div><div class=\"line\">    JSONArray jsonArray = JSONArray.fromObject(jsonStr);</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; jsonArray.size(); i++) &#123;</div><div class=\"line\">        <span class=\"comment\">// JSON转object对象</span></div><div class=\"line\">        String JOStr = jsonArray.getString(i);</div><div class=\"line\">        JSONObject JO = JSONObject.fromObject(JOStr);</div><div class=\"line\">        RbGoods goods =(RbGoods)JSONObject.toBean(JO, RbGoods.class);</div><div class=\"line\">        System.out.println(goods.getGoodsCd());</div><div class=\"line\">    &#125;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">return</span> SUCCESS;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\">function <span class=\"title\">newchePoint</span><span class=\"params\">(obj)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"&lt;che id=\\\"\"</span>+obj.id+</div><div class=\"line\">    <span class=\"string\">\"\\\" type=\\\"\"</span>+obj.type+<span class=\"string\">\"\\\" value=\\\"\\\"/&gt;\\r\\n\"</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><strong>更新ing…</strong></li>\n</ul>\n"},{"title":"about","url":"http://rebey.cn/about/index.html","content":""},{"title":"category","url":"http://rebey.cn/category/index.html","content":""},{"title":"project","url":"http://rebey.cn/project/index.html","content":""},{"title":"search","url":"http://rebey.cn/search/index.html","content":""},{"title":"link","url":"http://rebey.cn/link/index.html","content":""},{"title":"tag","url":"http://rebey.cn/tag/index.html","content":""}]